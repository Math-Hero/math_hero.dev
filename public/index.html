<html>
<head>
	<title>Math Quest</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  	<link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="js/jquery.js"></script> 
	<script src="js/jquery-1.12.0.js"></script>
	<style>
		body {		
			width:7680px;
			height:auto;
		}
		#container {
			position:absolute;
			background:no-repeat;
			height:100%;
			width:100%;		
		}
		.overlay{
		  	position: absolute;
		  	width: 100%;
		  	height: 100%;
		  	z-index: 4;
		  	background-color: rgba(0,0,0,0.5); /*dim the background*/
		}
		/**The following is the css for the layout; it divides the body into "pages" and 
		 * allows progression through the pages. It also for the modals.
		**/ 
		.page{
			position:absolute;
			width:100%;
			height:100%;
		}
		#background {
			position:absolute;
			opacity:0.5;
		}
		#intro {
			position:absolute;
			visibility: visible;
			height:80%;
			width:60%;
			right:5%;
			top:10%;
			border-radius: 3%;
			z-index: 7;
			background-color: #F5DEB3;
		}
		#pg1{
			background:linear-gradient(#4169E1,white);
		}
		#pg2{
			background:linear-gradient(#4B0082,white);
			left: 100%;
		}			
		#pg3 {
			background:linear-gradient(#B0C4DE,white);
			left:200%;
		}	
		#pg4 {		
			background:linear-gradient(#FF4500,white);
			left:300%;
		}		
		#pg5{
			background:linear-gradient(#4169E1,white);
			left:400%;
		}	
		.prob_page div{
			font-family: 'Lato';
			height:60%;
			width:20%;
			font-size:300%;
			float:left;
			z-index: 10;
			color: black;
		}
		.check , .answer{
			position:absolute;
			font-size:200%;
			font-family: 'Lato';
			left:40%;
			top:60%;
		}
		.answer {
			position:absolute;
			right:20%;
			z-index: 10;
		}
		.prob_page{
			position:absolute;
			visibility: hidden;
			height:80%;
			width:60%;
			top:5%;
			right:5%;
			z-index: 7;
			border-radius: 3%;
			border: 1px solid black;
			background-color: #F5DEB3;
			color: black;
			font-family: 'Lato';
		}
		#for_pg1{
			position:absolute;
			visibility:hidden;
			right:5%;
			top:40%;
			height:15%;
			background-color:#563D04;
			color:#F5DEB3;
			z-index:8;
		}
		#intro_text{
			position: absolute;
			text-align: center;
			width:65%;
			height:90%;
			left:5%;
			top:13%;
			font-size: 250%;
			font-weight:lighter;
			font-family: 'Lato';
		}
		.for_prob{
			position:absolute;
			z-index:6;
		}
		/* The following css is for the animated divs */
		.animation{
			position:absolute;
			visibility:visible;
			background-size: 100% auto;
			height:100%;
			width:100%;
		}
		.animation div{
			position:absolute;
			visibility:visible;
			background-size: auto 100%;
			bottom:0%;
			width:800%;
			right:-700%;
			z-index:2;
			height:auto;
			bottom:0%;
		} 
		.player{
			position:absolute;
			background:url(../images/player.png) no-repeat left bottom;
			width:30%;
			height:100%;
			z-index:5;
		}
		.zombie{
			position:absolute;
			visibility: hidden;
			width:30%;
			height:30%;
			z-index:7;
			background:url(../images/mj-02.png) no-repeat left bottom;
		}
		.answer{
			
		}
		.numA, .numB {
		position: absolute;
			text-align: center;
			width:65%;
			height:90%;
			left:5%;
			top:13%;
			font-size: 250%;
			font-weight:lighter;
			font-family: 'Lato';
		}
	</style> 
</head>
<body>	
	<!--EVERY PAGE HAS A .PAGE CLASS AND A #PG[] ID
		THE "CLICK FOR PROBLEM" BUTTON HAS A #FOR_PROB_PG[] ID AND
		A .FOR_PROB CLASS
		THE PROBLEM MODAL HAS A #PROB_PAGE_PG[] ID AND A .PROB_PAGE CLASS -->  
	<div class="overlay"></div>
	<div id="container">
		<div id="pg1" class="page">
			<input class="timer" type="text">
			<div id="intro">
				<div id="intro_text">
					<b><u>Math</u></b> <b><u>Quest</u></b><br><br>Help the princess get to the castle
					by solving math questions along the way. You have 5 minutes
					to reach the castle.<br><br><b>GOOD LUCK!</b>
				</div>
				<button id="for_pg1" type="button" class="btn btn-primary btn-lg">Click to begin</button>
			</div>
			<div id="pg1-animation" class="animation"> 
				<div id="animation-01-pg1" class="animation-01"><img src="images/cloud-01.png" alt="cloud-01"></div>
				<div id="animation-02-pg1" class="animation-02"><img src="images/tree-01.png" alt="tree-01"></div>
				<div id="animation-03-pg1" class="animation-03"><img src="images/ground-01.png" alt="ground-01"></div>
			</div> 
			<div class="player"></div>	
			<div class="zombie"></div>
			<div id="prob_page_pg1"class="prob_page">
				<table style="width:80%">
				<tr>
				<td id="numA1"></td>
				<td>+</td>
				<td id="numB1"></td>
				<td>=</div>
	<input id="answer" type="text" size="4"></input>
	<input type="button" value="Check" onclick="ans()"></input>
	</tr>
	</table>
	<input id="answer" type="text" size="4"></input>
	<input type="button" value="Check" onclick="ans()"></input>
	</tr>
	</table>
			</div>
		</div>
		<div id="pg2" class="page">	
			<input id="timer" type="text">
			<div id="pg2-animation" class="animation"> 
				<div id="animation-01-pg2" class="animation-01"><img src="images/tree-02.png" alt="tree-02"></div>
				<div id="animation-02-pg2" class="animation-02"><img src="images/ground-02-02.png" alt="ground-02-02"></div>
				<div id="animation-03-pg2" class="animation-03"><img src="images/ground-02.png" alt="ground-02"></div>
			</div> 
			<div class="player"></div>
			<div class="zombie"></div>

	<div id="prob_page2"class="prob_page">
		<table style="width:80%">
			<tr>
				<td id="numA"></td>
				<td>+</td>
				<td id="numB"></td>
				<td>=</div>
	<input id="answer" type="text" size="4"></input>
	<input type="button" value="Check" onclick="ans()"></input>
	</tr>
	</table>
</div>
		</div>
		<div id="pg3" class="page">		
			<div id="pg3-animation" class="animation"> 
				<input id="timer" type="text">
				<div id="animation-01-pg3" class="animation-01"><img src="images/cloud-03.png" alt="cloud-03"></div>
				<div id="animation-02-pg3" class="animation-02"><img src="images/mountain.png" alt="mountain"></div>
				<div id="animation-03-pg3" class="animation-03"><img src="images/ground-03.png" alt="ground-03"></div>
			</div> 
			<div class="player"></div>
			<div class="zombie"></div>
			<div id="prob_page_pg3" class="prob_page">
				<div id="numA3"class="numA"></div>
			    <div class="symbol">+</div> 
			    <div id="numB3"class="numB"></div>
			    <div class="equal">=</div>
			    <div><input class="answer" type="text" size="3" ></input></div>
			</div>
		</div>
		<div id="pg4" class="page">
			<div id="pg4-animation" class="animation"> 
				<input id="timer" type="text">
				<div id="animation-01-pg4" class="animation-01"><img src="images/rock.png" alt="rock"></div>
				<div id="animation-02-pg4" class="animation-02"><img src="images/cactus.png" alt="cactus"></div>
				<div id="animation-03-pg4" class="animation-03"><img src="images/ground-04.png" alt="ground-04"></div>
			</div>  
			<div class="player"></div>
			<div class="zombie"></div>
			<div id="prob_page_pg4" class="prob_page">
				<div id="numA4"class="numA"></div>
			    <div class="symbol">+</div> 
			    <div id="numB4"class="numB"></div>
			    <div class="equal">=</div>
			    <div><input class="answer" type="text" size="3" ></input></div>
			</div>
		</div>
		<div id="pg5" class="page">
			<div class="player"></div>
			<img src="images/castle-01.png" alt ="castle-01">
			<div class="head"></div>
			<div class="for_pg1"><button type="button">Click To Return</button></div>
		</div>
	<div>
	<script>
		"use strict";
		var pageNum=1;
		function setWindowWidth(){
   			var windowWidth = window.innerWidth;
    		document.getElementsByTagName('body')[0].style.width = windowWidth + "px";
		}
		function setWindowHeight(){
    		var windowHeight = window.innerHeight;
    		document.getElementsByTagName('body')[0].style.height = windowHeight + "px";
		}
		window.addEventListener("resize",setWindowWidth,false);
		window.addEventListener("resize",setWindowHeight,false);				 
		$(document).ready(function() {
			console.log("doc");
			//Starts the timer and counter functions
			setWindowWidth();	
			setWindowHeight();
			bouncePlayer();
			setTimeout("showPgBtn()",10000);
	/*		var foreground = function (scenery) {
		      	//  $(scenery).css({right:0});
		      	$(scenery).css({right:-6400});
		        $(scenery).animate ({
		            right: "+=6400"
		        }, 120000, 'linear', function() {
		            foreground();
		    	});	
		    } */
		/*	*/
		//	foreground("#animation-02-pg1");
			// HANDLES MATH PROBLEM EVENTS
			$('input[type="button"]').click(function() {
				
	        	//alert box feedback before generating random numbers
	      		var num1=parseInt($("#number1").text());
	        	var num2=parseInt($("#number2").text());
	      		var total = num1 + num2;
	        	var answer = parseInt($("input[type='text']").val());
	        
	      		if ($("input[type='text']").val() === '') {
	            	alert("You have not keyed any answer");
	        	} else if (answer === total) {
	          		alert("Great job, your highness! That is correct.");
	          		$(".zombie").css("visibility", "hidden");
	          		setTimeout("movePage()",2000);
	        	} else {
	          		alert("Nope! Try again your majesty.");
	          		showZombie();
	        	}	    
			      //generate a random number range 1 to 9 for number 1 after clicking alert box using callback function
			      $("#number1").innerHTML =
			    Math.floor(Math.random() * 10);
			      
			      //generate a random number range 1 to 9 for number 2 after clicking alert box using callback function
			      $("#number2").innerHTML =
			    Math.floor(Math.random() * 10); 
			});
		});
		//ANIMATION IF MATH INPUT IS INCORRECT
		function showZombie() {
			$(".zombie").css("visibility", "visible");
		}
		function showPgBtn() {
			$("#for_pg1").css("visibility", "visible");		
		}
		//ADVANCES TO FIRST PAGE, STARTS PG1 ANIMATIONS
		$('#for_pg1').click(function() {
			startTimer(); 	
			$("#for_pg1").css("visibility", "hidden");
			$("#intro").css("visibility", "hidden");					
			$(".for_prob1").css("visibility", "visible");
			$("#prob-pg1").css("z-index", "-1");
			$(".overlay").css("z-index", "-3");				
		});
		//ADVANCES RUESULTING PAGES, STOPS "OLD" ANIMATION 
		//BEGINS "NEW" ANIMATION
				function movePage() {	
			$("#pg" + pageNum + "-animation div").stop();
			$("#pg" + pageNum +"-animation div").css("z-index", "-5");
			$("#prob_page_pg" + pageNum).css("z-index", "-1");
			pageNum++;
			console.log(pageNum);$('html,body').animate( {
		        scrollLeft: $("#pg" + pageNum).offset().left
		    }, 'slow');
		    function foreground() {					      	
		    $('#animation-03-pg'+pageNum).css({right:-6400});
			    $('#animation-03-pg'+pageNum).animate ({
			        right: '+=6400',
			    }, 30000, 'linear', function() {
			        foreground();
			    });
			}
			foreground();
		    function background_02() {					      	
		    $('#animation-02-pg'+pageNum).css({right:-6400});
			    $('#animation-02-pg'+pageNum).animate ({
			        right: '+=6400',
			    }, 40000, 'linear', function() {
			        background_02();
			    });
			}
			background_02();
			function background_01() {					      	
			    $('#animation-01-pg'+pageNum).css({right:-6400});
			    $('#animation-01-pg'+pageNum).animate ({
			        right: '+=6400',
			    }, 50000, 'linear', function() {
			        background_01();
			    });
			}
			background_01();
	//	    landscape($("#animation-01-pg"+pageNum), 300000);
	//		landscape($("#animation-02-pg"+pageNum), 200000);
		} 
		//EVENTS WHEN "CLICK FOR PROBLEM" BUTTON IS PRESSED		
		$(".for_prob").click(function() {
			$("#pg" + pageNum + "-animation div").stop();
			$("#prob_page_pg" + pageNum).css("visibility", "visible");
			$(".prob_page").css("z-index", "6");
		});	
		//PLAYER ANIMATION
		var numBody = 2;
		function startPlayer(){
			numBody++;
			$(".player").animate({top:"-="+numBody+ "%"},500).animate({top:"+="+numBody+"%"},500);
			if(numBody<2){
				setTimeout("startPlayer()",500);
			} else {
				setTimeout("bouncePlayer()",500);
			}
		}	
		function bouncePlayer(){
			$(".player").animate({top:"-=2%"},500).animate({top:"+=2%"},500);
			setTimeout("bouncePlayer()",500);
		} 
/*		#animation-02-pg1 */
/*		while(counter<5) {
			bouncePlayer();
		} 
		function bouncePlayer(){
			$(".player").animate({top:"-=2%"},500).animate({top:"+=2%"},500);
			setTimeout("bouncePlayer()",500);
		}  */
		//LANDSCAPE ANIMATION
/*		var lives = 3; //User starts with 3 lives
	//This function specifies how the timer runs and feeds in the mathProblem function to run every second
	function startTimer(duration, display) { 
	    var timer = duration, minutes, seconds;
	    setInterval(function () {
	        minutes = parseInt(timer / 60, 10);
	        seconds = parseInt(timer % 60, 10);
	        minutes = minutes < 10 ? "0" + minutes : minutes;
	        seconds = seconds < 10 ? "0" + seconds : seconds;
	        display.textContent = minutes + ":" + seconds;
	        if (--timer < 0) {
	            timer = duration;
	        } mathProblem();
	    }, 1000);
	    return timer;
	}
	//This function specifies the timer start time and feeds it into the html 
	function gameTimer() {
		console.log("Game Timer started"); 
	    var fiveMinutes = 60 * 5,
	        display = document.querySelector('#time');
	    startTimer(fiveMinutes, display);
	    console.log(startTimer);
	};
	//This function randomizes a number between 1 and 100 in order to randomly invoke a pop-up
	function mathProblem(){
		console.log("Math function started");
		var counter = Math.floor((Math.random() * 100) + 1);//Randomizes the number
		console.log(counter);
		if (counter % 7 == 0){ //Evaluates whether the number is divisible by 4
			var question = prompt("What is 2 + 2?");//Just a placeholder for the pop up modal with math question
			var answer = 4;
			console.log("Counter worked");
			if (question != answer){
				alert("Wrong!");
				lives--; //If answer is wrong, Player is deducted a life
				mathProblem();
			} else {
				mathProblem();
			}
		} 
		
	}
	
			
/*	$(document).ready(function(){
		gameTimer(); //Starts the timer and counter functions			
	
	});
	})(); */
		//FOREGROUND AND BACKGROUND ANIMATIONS FOR THE FIRST PAGE; ALL OTHER PAGES HANDLED BY MOVEPAGE FUNCTION
		function foreground() {					      	
		    $('#animation-03-pg'+pageNum).css({right:-6400});
			    $('#animation-03-pg'+pageNum).animate ({
			        right: '+=6400',
			    }, 35000, 'linear', function() {
			        foreground();
			    });
			}
		foreground();
		function background_02() {					      	
		    $('#animation-02-pg'+pageNum).css({right:-6400});
		    $('#animation-02-pg'+pageNum).animate ({
		        right: '+=6400',
		    }, 40000, 'linear', function() {
		        background_02();
		    });
		}
		background_02();
		function background_01() {					      	
		    $('#animation-01-pg'+pageNum).css({right:-6400});
		    $('#animation-01-pg'+pageNum).animate ({
		        right: '+=6400',
		    }, 50000, 'linear', function() {
		        background_01();
		    });
		}
		background_01();
		var pageNum=1

	
	var lives = 3; //User starts with 3 lives
	var maxValue=60;
	var Answer= $("#answer").val();
	var ticker = 0;
	// start timer function
	var d1 = new Date();
	d1.setHours(0,5,0);

	var t = 0;



	function pause(){
		clearTimeout(t);
	}


	function resume(){
		t= setTimeout(startTimer,1000);
	}



	function startTimer(duration, display) {

		var h= d1.getHours();
		var m= d1.getMinutes();
		var s=d1.getSeconds();
		m= (m<10)?"0"+m: m;
		s= (s<10)? "0"+s : s;
		var el= document.getElementById("timer");
		el.value= h+":"+m+":"+s;
		d1.setSeconds(d1.getSeconds()-1);
		if( h==0 && m==0 && s==0 ) clearTimeout(t);
		t= setTimeout(startTimer,1000);
		if(s == 55) {  //variable s is the number of seconds on the timer.... make this statement whatever you want so that the problem pops up.
			pause();
			mathProblem();
		}
	}

	//This function displays the problem in a popup.
	function mathProblem(){
			$("#pg" + pageNum + "-animation div").stop();
			$("#prob_page_pg" + pageNum).css("visibility", "visible");
			$(".prob_page").css("z-index", "6");
		//	$("#prob_page_pg" +pageNum).show();
			//	mathQuiz();
			random1(maxValue);
			random2(maxValue);
			add();

	}
	//First random number to compare
	function random1(maxValue) {
		day= new Date();
		hour= day.getHours();
		min=day.getMinutes();
		sec=day.getSeconds();
		mili=day.getTime()
		return(((hour*3600)+(min*60)+(sec)+mili) % maxValue);
	}
	//second random number to compare
	function random2(maxValue) {
		day= new Date();
		mil=day.getTime();
		return((mil) % maxValue);
	}
	//add function
	function add() {
		numA=random1(maxValue);
		numB=random2(maxValue);
		numC=numA + numB;
		document.getElementById("numA"+pageNum).innerHTML = numA;
		document.getElementById("numB"+pageNum).innerHTML = numB;

	}
	//evaluates answer
	function ans() {
		if ($(Answer === numC)) {
			alert("Great job your highness!");
			$("#prob_page_pg"+pageNum).hide();
			resume();
		}
		else {
			lives--; //If answer is wrong, Player is deducted a life
			msg = "Oops!  " + Answer + " is incorrect.\n\n"
					+ "The correct answer was " +numC + ".\n\n"
					+ "You have "+ lives+ " remaining";
			console.log(lives);
			mathProblem();
		}
	}
	</script>
</body>
</html>
